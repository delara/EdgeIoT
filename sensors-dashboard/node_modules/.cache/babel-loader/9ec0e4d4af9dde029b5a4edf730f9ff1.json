{"ast":null,"code":"import _classCallCheck from \"/Users/Farhad/Desktop/socket/sensors-dashboard/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/Farhad/Desktop/socket/sensors-dashboard/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Farhad/Desktop/socket/sensors-dashboard/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Farhad/Desktop/socket/sensors-dashboard/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Farhad/Desktop/socket/sensors-dashboard/src/Dashboard.js\";\nimport React, { Component } from 'react';\nimport { Progress, Container, Row } from \"reactstrap\";\nimport axios from 'axios';\nimport openSocket from \"socket.io-client\";\nvar io = openSocket('http://localhost:5000');\nvar i = 0;\nvar intervalId = 0;\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dashboard, _Component);\n\n  function Dashboard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Dashboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Dashboard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      sensors: [],\n      sensorData: {}\n    };\n\n    _this.componentDidMount = function () {\n      console.log('test');\n\n      _this.getSensors();\n\n      intervalId = setInterval(function (_) {\n        io.emit('sensors_data');\n        i++;\n      }, 1000);\n      io.on('data', function (sensorDataJson) {\n        var sensorData = sensorDataJson ? JSON.parse(sensorDataJson) : {};\n\n        _this.setState({\n          sensorData: sensorData\n        });\n\n        console.log(sensorData);\n      });\n    };\n\n    _this.componentWillUnmount = function () {\n      console.log(intervalId);\n      clearInterval(intervalId);\n    };\n\n    _this.getSensors = function () {\n      axios.get('http://0.0.0.0:5000/sensors').then(function (res) {\n        var sensors = [];\n\n        for (var sensorKey in JSON.parse(res.data.sensors)) {\n          sensors.push(JSON.parse(res.data.sensors)[sensorKey]);\n        }\n\n        _this.setState({\n          sensors: sensors\n        });\n\n        console.log(sensors);\n      });\n    };\n\n    _this.render = function () {\n      return React.createElement(\"div\", {\n        className: \"m-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"Sensors dashboard\")), React.createElement(Container, {\n        style: {\n          marginTop: 50\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, _this.state.sensors.map(function (sensor) {\n        return React.createElement(Row, {\n          className: \"d-flex align-items-center mt-5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          style: {\n            width: 100\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, sensor.name), React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, _this.state.sensorData[sensor.name] && _this.state.sensorData[sensor.name]['value'] && _this.state.sensorData[sensor.name]['value'].toString()));\n      })));\n    };\n\n    return _this;\n  }\n\n  return Dashboard;\n}(Component);\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/Farhad/Desktop/socket/sensors-dashboard/src/Dashboard.js"],"names":["React","Component","Progress","Container","Row","axios","openSocket","io","i","intervalId","Dashboard","state","sensors","sensorData","componentDidMount","console","log","getSensors","setInterval","_","emit","on","sensorDataJson","JSON","parse","setState","componentWillUnmount","clearInterval","get","then","res","sensorKey","data","push","render","marginTop","map","sensor","width","name","toString"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n    Progress,\n    Container,\n    Row,\n\n} from \"reactstrap\";\nimport axios from 'axios';\nimport openSocket from \"socket.io-client\";\nconst io = openSocket('http://localhost:5000')\n\nvar i = 0\nvar intervalId = 0\n\nclass Dashboard extends Component {\n\n\n    state = {\n        sensors: [],\n        sensorData: {},\n    }\n\n    componentDidMount = () => {\n        console.log('test')\n        this.getSensors()\n        intervalId = setInterval(_ => {\n            io.emit('sensors_data')\n            i++;\n        }, 1000)\n        io.on('data', sensorDataJson => {\n            var sensorData = sensorDataJson ? JSON.parse(sensorDataJson) : {}\n            this.setState({ sensorData })\n            console.log(sensorData)\n        })\n    }\n\n    componentWillUnmount = () => {\n        console.log(intervalId)\n        clearInterval(intervalId)\n    }\n\n    getSensors = () => {\n        axios.get('http://0.0.0.0:5000/sensors')\n            .then(\n                res => {\n                    var sensors = []\n                    for (var sensorKey in JSON.parse(res.data.sensors)) {\n                        sensors.push(JSON.parse(res.data.sensors)[sensorKey])\n                    }\n                    this.setState({ sensors })\n                    console.log(sensors)\n                }\n            )\n    }\n\n    render = () => {\n        return (\n            <div className='m-5'>\n                <div className='d-flex align-items-center justify-content-center mt-2'>\n                    <h1>Sensors dashboard</h1>\n                </div>\n                <Container style={{ marginTop: 50 }}>\n                    {this.state.sensors.map(sensor => (\n                        <Row className='d-flex align-items-center mt-5'>\n                            <h5 style={{ width: 100 }}>{sensor.name}</h5>\n                            <h2>{this.state.sensorData[sensor.name] && this.state.sensorData[sensor.name]['value'] && this.state.sensorData[sensor.name]['value'].toString()}</h2>\n                        </Row>\n                    ))}\n\n                </Container>\n\n            </div>\n\n        )\n    }\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}